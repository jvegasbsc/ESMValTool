documentation:
  description: |
    Independent assessment of single fapar products for the C3S_511 quality brief

  authors:
    - mueller_benjamin

  maintainer:
    - mueller_benjamin


datasets:
#  - {dataset: cds-satellite-lai-fapar, type: sat, project: OBS, mip: Lmon, version: V1, tier: 3, start_year: 1999,  end_year: 2013}
  - {dataset: CDS-SATELLITE-LAI-FAPAR, type: sat, project: OBS, mip: Lmon, version: V1.0.1, tier: 3, start_year: 1999,  end_year: 1999}
#  - {dataset: CNRM-ESM2-1, grid: gr, ensemble: r1i1p1f2, exp: 1pctCO2-bgc, project: CMIP6, mip: Lmon,  start_year: 1850,  end_year: 1870}#1989}
#  - {dataset: CNRM-ESM2-1, grid: gr, ensemble: r1i1p1f2, exp: amip, project: CMIP6, mip: Lmon,  start_year: 1979,  end_year: 2014}
preprocessors:
  noop:
    mask_landsea:
      mask_out: sea
  regrid_ex:
    regrid:
      target_grid: 20x20
      scheme: nearest
  sel_NH: &NH
    extract_region:
      start_longitude: -180.
      end_longitude: 180.
      start_latitude: 20.
      end_latitude: 70.
  get_jan:
    custom_order: true
    extract_month:
      month: 1
    <<: *NH
    mask_landsea:
      mask_out: sea
  get_jul:
    custom_order: true
    extract_month:
      month: 7
    <<: *NH
    mask_landsea:
      mask_out: sea



diagnostics:
  SPQB_fapar:
    description: Single product quality brief.
    variables:
      fapar: 
        preprocessor: noop
        derive: False
    scripts:
##      diag_fapar_O_info:
##        script: qualassess/fapar_C3S_511_SPQB.py
##        requests: [info]#, GCOS]
##      diag_fapar_O_avail:
##        script: qualassess/fapar_C3S_511_SPQB.py
##        requests: [availability]
##      diag_fapar_O_hist:
##        script: qualassess/fapar_C3S_511_SPQB.py
##        requests: [histogram]
###        log_data: True
##      diag_fapar_MV_ts: 
##        requests: [time_series]
##        script: qualassess/fapar_C3S_511_SPQB.py
###        log_data: True
#      diag_fapar_MV_mean:
#        script: qualassess/fapar_C3S_511_SPQB.py
#        requests: [mean]
##        log_data: True
#      diag_fapar_MV_std_dev:
#        script: qualassess/fapar_C3S_511_SPQB.py
#        requests: [std_dev]
##        log_data: True
#      diag_fapar_MV_perc:
#        script: qualassess/fapar_C3S_511_SPQB.py
#        requests: [percentiles]
##        log_data: True
#      diag_fapar_MV_clim:
#        script: qualassess/fapar_C3S_511_SPQB.py
#        requests: [climatology]
#        log_data: True
#      diag_fapar_MV_anom:
#        script: qualassess/fapar_C3S_511_SPQB.py
#        requests: [anomalies]
#      diag_fapar_T_trend: #worst for memory
#        script: qualassess/fapar_C3S_511_SPQB.py
#        requests: [lintrend]
##        num_processors: 7
##      diag_fapar_custom:
##        script: qualassess/fapar_C3S_511_SPQB.py
##        requests: [custom]
      diag_fapar_tables:
        script: qualassess/fapar_C3S_511_SPQB.py
##        requests: [SMM, GCOS, ESM]
        requests: [MM]
#      report:
#        script: qualassess/fapar_C3S_511_SPQB.py
#        ancestors: ['fapar', '*/diag_fapar_*']
#        requests: [report]
#        order: [diag_fapar_O_info, diag_fapar_tables, diag_fapar_O_hist, diag_fapar_O_avail,
#                diag_fapar_MV_ts, diag_fapar_MV_mean, diag_fapar_MV_std_dev, diag_fapar_MV_perc, 
#                diag_fapar_MV_clim, diag_fapar_MV_anom, diag_fapar_T_trend]#, diag_fapar_custom]
#        show_latex: False #options are: True/False/no_latex
#  SPQB_fapar_jan:
#    description: Single product quality brief.
#    variables:
#      fapar: 
#        preprocessor: get_jan
#        derive: False
#    scripts:
#      diag_fapar_MV_mean:
#        script: qualassess/fapar_C3S_511_SPQB.py
#        requests: [mean]
#  SPQB_fapar_jul:
#    description: Single product quality brief.
#    variables:
#      fapar: 
#        preprocessor: get_jul
#        derive: False
#    scripts:
##      diag_fapar_MV_mean:
##        script: qualassess/fapar_C3S_511_SPQB.py
##        requests: [mean]
#      diag_fapar_T_trend: #worst for memory
#        script: qualassess/fapar_C3S_511_SPQB.py
#        requests: [lintrend]